<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Prime Source — Tech & Finance</title>

  <!-- Verification tags (PopCash & HilltopAds) -->
  <meta name="ppck-ver" content="ffb5ccc5fd3d0e581aed946f0c9f70cc" />
  <meta name="5df1ba9d2e3dac3cf068d90d223fa5631f6a3745" content="5df1ba9d2e3dac3cf068d90d223fa5631f6a3745" />

  <!-- Google Analytics / GTAG (replace G-XXXXX with your ID) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXX"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-XXXXX');
  </script>

  <!-- Adsterra script (active) -->
  <script type='text/javascript' src='//spitefulleapraspberry.com/f8/d6/9d/f8d69d01915ccffb54b4095e79d50e69.js'></script>

  <style>
    :root{--bg:#ffffff;--card:#f7fbff;--accent:#0ea5e9;--muted:#6b7280;--text:#07203a;}
    *{box-sizing:border-box}
    body{font-family:Inter,system-ui,Segoe UI,Roboto,Arial;background:var(--bg);color:var(--text);margin:0;line-height:1.4}
    .wrap{max-width:1100px;margin:28px auto;padding:20px}
    header{display:flex;align-items:center;gap:12px}
    .logo{width:64px;height:64px;border-radius:12px;background:linear-gradient(135deg, #fff, var(--accent));display:flex;align-items:center;justify-content:center;font-weight:700;color:#fff;box-shadow:0 8px 30px rgba(14,165,233,0.12)}
    h1{font-size:20px;margin:0}
    p.lead{color:var(--muted);margin:6px 0 20px}

    /* tiles */
    .tiles{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:14px;margin:18px 0}
    .tile{background:var(--card);padding:14px;border-radius:12px;border:1px solid rgba(2,6,23,0.04);cursor:pointer;transition:transform .18s ease, box-shadow .18s ease}
    .tile:hover{transform:translateY(-6px);box-shadow:0 14px 36px rgba(2,6,23,0.06)}
    .tile .tlogo{width:44px;height:44px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#60a5fa);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;margin-bottom:8px}
    .tile h3{margin:0;font-size:16px}
    .tile p{margin:6px 0 0;color:var(--muted);font-size:13px}

    /* hero / area */
    .hero{background:linear-gradient(180deg,rgba(14,165,233,0.06),rgba(96,165,250,0.03));padding:18px;border-radius:12px;margin-top:12px;display:flex;gap:14px;align-items:center;justify-content:space-between}
    .hero-left{flex:1}
    .hero-right{width:320px;min-width:220px;text-align:center}

    .loader{height:12px;background:#e6f7ff;border-radius:999px;overflow:hidden;margin-top:8px}
    .bar{width:0;height:100%;background:linear-gradient(90deg,var(--accent),#60a5fa);transition:width .2s linear}

    /* unlock area */
    .unlock-wrap{text-align:center;margin-top:18px}
    .unlock-btn{display:none;padding:12px 18px;border-radius:10px;border:0;background:var(--accent);color:white;font-weight:700;cursor:pointer;font-size:16px}
    .note{color:var(--muted);font-size:13px;margin-top:8px}

    /* content area */
    .value-area{display:none;margin-top:18px;padding:14px;border-radius:12px;background:#fffefc;border:1px solid rgba(3,7,18,0.03)}
    .small{font-size:13px;color:var(--muted)}

    /* footer */
    footer{margin-top:26px;color:var(--muted);font-size:13px;display:flex;gap:12px;align-items:center}
    a.inline{color:var(--accent);text-decoration:none}
    .ad-placeholder{height:90px;border-radius:8px;background:linear-gradient(90deg,#f8fafc,#eef6ff);display:flex;align-items:center;justify-content:center;color:var(--muted);margin-top:12px}
    /* responsive */
    @media (max-width:700px){ .hero{flex-direction:column;align-items:stretch} .hero-right{width:100%} }
  </style>
</head>
<body>
  <div class="wrap" role="main">
    <header>
      <div class="logo">PS</div>
      <div>
        <h1>Prime Source — Tech &amp; Finance</h1>
        <p class="lead">Welcome — pick a channel to enter. The page adapts per channel and optimizes ad & content delivery.</p>
      </div>
    </header>

    <!-- Channel tiles -->
    <section class="tiles" id="channelsGrid" aria-label="Channels">
      <div class="tile" data-channel="tech_finance" tabindex="0">
        <div class="tlogo">TF</div>
        <h3>Tech & Finance</h3>
        <p>AI, business, industry, luxury — main channel (active)</p>
      </div>
      <div class="tile" data-channel="entertainment" tabindex="0">
        <div class="tlogo">EN</div>
        <h3>Entertainment</h3>
        <p>Viral clips, pop culture, fast hits</p>
      </div>
      <div class="tile" data-channel="personal_dev" tabindex="0">
        <div class="tlogo">PD</div>
        <h3>Personal Dev</h3>
        <p>Short lessons, micro-habits, upgrades</p>
      </div>
      <div class="tile" data-channel="gaming" tabindex="0">
        <div class="tlogo">GM</div>
        <h3>Gaming</h3>
        <p>Clips, tips, highlights</p>
      </div>
    </section>

    <!-- Hero / active channel preview -->
    <div class="hero" id="hero">
      <div class="hero-left">
        <h2 id="activeTitle">Tech &amp; Finance — Welcome</h2>
        <p id="activeLead" class="small">Curated quick insights. Click unlock to see the value — ads and content unlock will run as configured.</p>
        <div class="loader" aria-hidden="true"><div class="bar" id="loaderBar"></div></div>
        <div class="unlock-wrap">
          <button id="unlockBtn" class="unlock-btn" aria-hidden="true">Unlock Now</button>
          <div class="note" id="note">Preparing your content & monetization layers…</div>
        </div>
      </div>
      <div class="hero-right">
        <div class="ad-placeholder" id="topAd">Top ad slot</div>
        <div class="small" style="margin-top:8px">Channel: <strong id="channelName">Tech &amp; Finance</strong></div>
      </div>
    </div>

    <div class="value-area" id="valueArea" role="region" aria-live="polite">
      <h3>Content unlocked</h3>
      <p class="small">Complete any offer that opens in the new tab to reach final download or bonus content. If nothing opened, use the backup link below.</p>
      <p><a id="backupLink" class="inline" href="#" target="_blank" rel="noopener">Backup content link</a></p>
      <div class="ad-placeholder" id="midAd">Mid-page ad</div>
    </div>

    <footer>
      <div>© Prime Source</div>
      <a class="inline" href="/privacy.html">Privacy</a>
      <a class="inline" href="/terms.html">Terms</a>
    </footer>
  </div>

  <script>
    // ====== CONFIG ======
    const CHANNELS = {
      "tech_finance": {
        title: "Tech & Finance",
        lead: "AI, business, industry, luxury — main channel",
        gg_smartlink: "https://qvxprml.one/cl/648da0395cce0fe4",
        shrinkme: "https://shrinkme.click/HG2z",
        cpagrip_script_src: "https://playabledownload.com/script_include.php?id=1851719",
        adsterra_script: "//spitefulleapraspberry.com/f8/d6/9d/f8d69d01915ccffb54b4095e79d50e69.js",
        hilltop_meta: "5df1ba9d2e3dac3cf068d90d223fa5631f6a3745",
        popcash_meta: "ffb5ccc5fd3d0e581aed946f0c9f70cc"
      },
      "entertainment": { title:"Entertainment", lead:"Viral clips and culture", gg_smartlink:"", shrinkme:"", cpagrip_script_src:"", adsterra_script:"", hilltop_meta:"", popcash_meta:"" },
      "personal_dev": { title:"Personal Dev", lead:"Micro-lessons", gg_smartlink:"", shrinkme:"", cpagrip_script_src:"", adsterra_script:"", hilltop_meta:"", popcash_meta:"" },
      "gaming": { title:"Gaming", lead:"Clips and highlights", gg_smartlink:"", shrinkme:"", cpagrip_script_src:"", adsterra_script:"", hilltop_meta:"", popcash_meta:"" }
    };

    // variables for UI
    const tiles = document.querySelectorAll('.tile');
    const activeTitle = document.getElementById('activeTitle');
    const activeLead = document.getElementById('activeLead');
    const channelName = document.getElementById('channelName');
    const loaderBar = document.getElementById('loaderBar');
    const unlockBtn = document.getElementById('unlockBtn');
    const note = document.getElementById('note');
    const valueArea = document.getElementById('valueArea');
    const backupLink = document.getElementById('backupLink');
    let currentChannel = 'tech_finance';

    // Loader simulation (~3s)
    function startLoader() {
      let p=0;
      loaderBar.style.width='0%';
      const t = setInterval(()=>{
        p+=2;
        loaderBar.style.width = p+'%';
        note.textContent = 'Preparing your content & monetization layers… ('+p+'%)';
        if(p>=100){ clearInterval(t); unlockBtn.style.display='inline-block'; unlockBtn.removeAttribute('aria-hidden'); note.textContent='Ready — click Unlock Now'; }
      },60);
    }

    // Channel click handlers
    tiles.forEach(tile=>{
      tile.addEventListener('click', ()=>{ activateChannel(tile.dataset.channel); });
      tile.addEventListener('keydown',(e)=>{ if(e.key==='Enter') activateChannel(tile.dataset.channel); });
    });

    function activateChannel(ch) {
      if(!CHANNELS[ch]) return;
      currentChannel = ch;
      activeTitle.textContent = CHANNELS[ch].title + ' — Welcome';
      activeLead.textContent = CHANNELS[ch].lead || '';
      channelName.textContent = CHANNELS[ch].title;
      // update backup link
      backupLink.href = CHANNELS[ch].shrinkme || '#';
      // reset UI
      unlockBtn.style.display='none'; valueArea.style.display='none';
      startLoader();
    }

    // Initial boot
    startLoader();

    // ===== Ad engine + fallback logic =====
    // Simple health-check loader that injects providers sequentially
    const AD_TIMEOUT = 2500; // ms per provider
    function injectScriptRaw(src){
      return new Promise(resolve=>{
        try{
          const s = document.createElement('script');
          s.src = src;
          s.async = true;
          s.onload = ()=>resolve(true);
          s.onerror = ()=>resolve(false);
          document.body.appendChild(s);
          setTimeout(()=>resolve(false), AD_TIMEOUT+200);
        }catch(e){ resolve(false); }
      });
    }

    async function bootAdProvidersForChannel(ch) {
      const cfg = CHANNELS[ch];
      // Try Adsterra first (display/social bar)
      if(cfg.adsterra_script){
        const ok = await injectScriptRaw(cfg.adsterra_script);
        if(ok) console.log('Adsterra loaded');
        else console.warn('Adsterra failed');
      }
      // Try Hilltop (non-blocking)
      if(cfg.hilltop_meta){
        // meta tag already present in head for site verification; if Hilltop provides script later, inject it as needed
        console.log('Hilltop meta present (verification)');
      }
      // PopCash will be injected only after user interaction or as a passive script if provided later
      // We keep this conservative: do not auto-insert PopCash popwithout direct user action to reduce risk of chrome warnings.
    }

    // Run ad boot in the background after a small delay
    setTimeout(()=>{ bootAdProvidersForChannel(currentChannel); }, 900);

    // ===== CPAGrip / GG Smartlink behavior (on unlock click) =====
    function injectCPAGripScript(src){
      return new Promise(resolve=>{
        try{
          const s = document.createElement('script');
          s.src = src;
          s.async = true;
          s.onload = ()=>resolve(true);
          s.onerror = ()=>resolve(false);
          document.body.appendChild(s);
        }catch(e){ resolve(false); }
      });
    }

    unlockBtn.addEventListener('click', async ()=>{
      const cfg = CHANNELS[currentChannel];
      // Try opening GG Smartlink / CPAGrip in new tab; prefer GG if present else use shrinkme
      const targetUrl = cfg.gg_smartlink || cfg.shrinkme || null;
      if(targetUrl){
        // open in new tab to preserve ad engine on main page
        const w = window.open(targetUrl, '_blank', 'noopener,noreferrer');
        if(!w){
          // popup blocked -> fallback to same-tab
          window.location.href = targetUrl;
        }
      } else if(cfg.cpagrip_script_src){
        // inject cpagrip script then rely on it to show offers (best when opened in new window)
        const ok = await injectCPAGripScript(cfg.cpagrip_script_src);
        console.log('CPAGrip script injected:', ok);
        // some CPAGrip setups auto-open offers; if not, show a message
      }
      // show value area immediately
      valueArea.style.display='block';
      gtag && gtag('event','unlock_click',{channel: currentChannel});
      // attempt booting PopCash (if you choose to inject popcash script later, do it here)
      // NOTE: PopCash often needs site verification before its script is provided; inject only when you have their approved snippet
    });

    // Anti-adblock friendly fallback: detect obvious blockers and show alternate CTA
    function detectAdblock() {
      return new Promise(resolve=>{
        const test = document.createElement('div');
        test.innerHTML = '&nbsp;';
        test.className = 'adsbox';
        test.style.position='absolute';
        test.style.left='-9999px';
        document.body.appendChild(test);
        setTimeout(()=>{
          const blocked = getComputedStyle(test).display === 'none' || test.clientHeight===0;
          document.body.removeChild(test);
          resolve(blocked);
        }, 100);
      });
    }

    // Show polite whitelist request when adblock detected
    (async ()=>{
      const blocked = await detectAdblock();
      if(blocked){
        const msg = document.createElement('div');
        msg.style.marginTop='12px';
        msg.style.padding='10px';
        msg.style.border='1px solid rgba(2,6,23,0.04)';
        msg.style.borderRadius='8px';
        msg.innerHTML = '<strong>Note:</strong> It looks like an adblocker is active. To help keep this service free, please whitelist this site or use the backup link below.';
        document.querySelector('.wrap').insertBefore(msg, document.querySelector('.wrap').children[2]);
      }
    })();

    // Expose a simple function to switch channel programmatically (for testing)
    window.activateChannel = activateChannel;
  </script>
</body>
</html>
